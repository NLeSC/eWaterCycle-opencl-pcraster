<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>PCRaster LinkOut API: pcrlinkin.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.3 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="dir_3b02ad88d8dcae2184ffc12f6adf837d.html">include</a>
  </div>
</div>
<div class="contents">
<h1>pcrlinkin.h File Reference</h1><code>#include &quot;pcrdll.h&quot;</code><br/>
<div class="dynheader">
Include dependency graph for pcrlinkin.h:</div>
<div class="dynsection">
<div class="center"><img src="pcrlinkin_8h__incl.png" border="0" usemap="#pcrlinkin_8h_map" alt=""/></div>
</div>

<p><a href="pcrlinkin_8h_source.html">Go to the source code of this file.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Typedefs</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef void *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="pcrlinkin_8h.html#a961bb27c7903d2afe3e4a3889e7def18">LinkInTransferArray</a> []</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">memory buffer for <a class="el" href="pcrlinkin_8h.html#a3779b696141297a5003c28fe71b2240f" title="execute the pcrxml::callPoint found in xml ">pcr_LinkInExecute()</a>  <a href="#a961bb27c7903d2afe3e4a3889e7def18"></a><br/></td></tr>
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="pcrlinkin_8h.html#a8b54ed90d1ab14f84e4ecf80f8558b2f">pcr_LinkInRunContext</a> (int nrRows, int nrCols, double cellSize, double xLowerLeftCorner, double yLowerLeftCorner, int timeStep)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">recieve the run context prior to each <a class="el" href="pcrlinkin_8h.html#a3779b696141297a5003c28fe71b2240f" title="execute the pcrxml::callPoint found in xml ">pcr_LinkInExecute()</a> call.  <a href="#a8b54ed90d1ab14f84e4ecf80f8558b2f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="pcrlinkin_8h.html#a2ddb53f338999a91fdd4ac37cfd44cbb">pcr_LinkInCheck</a> (const char *xml)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">perform typecheck for the pcrxml::callPoint found in <em>xml</em>  <a href="#a2ddb53f338999a91fdd4ac37cfd44cbb"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="pcrlinkin_8h.html#a3779b696141297a5003c28fe71b2240f">pcr_LinkInExecute</a> (const char *xml, <a class="el" href="pcrlinkin_8h.html#a961bb27c7903d2afe3e4a3889e7def18">LinkInTransferArray</a> linkInTransferArray)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">execute the pcrxml::callPoint found in <em>xml</em>  <a href="#a3779b696141297a5003c28fe71b2240f"></a><br/></td></tr>
</table>
<hr/><h2>Typedef Documentation</h2>
<a class="anchor" id="a961bb27c7903d2afe3e4a3889e7def18"></a><!-- doxytag: member="pcrlinkin.h::LinkInTransferArray" ref="a961bb27c7903d2afe3e4a3889e7def18" args="[]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void* <a class="el" href="pcrlinkin_8h.html#a961bb27c7903d2afe3e4a3889e7def18">LinkInTransferArray</a>[]</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>memory buffer for <a class="el" href="pcrlinkin_8h.html#a3779b696141297a5003c28fe71b2240f" title="execute the pcrxml::callPoint found in xml ">pcr_LinkInExecute()</a> </p>
<p>LinkInTransferArray is used in <a class="el" href="pcrlinkin_8h.html#a3779b696141297a5003c28fe71b2240f" title="execute the pcrxml::callPoint found in xml ">pcr_LinkInExecute()</a> as an array with the addresses of all result and argument (input) data.</p>
<p>If the callPoint to execute yield <em>r</em> results and has <em>a</em> arguments (excluding an optional string argument), then the size of the array is expected to be <em>r+a</em>. The first <em>r</em> positions are for the results and the next <em>a</em> positions for the arguments. In other words, the first result is at position 0, and the first argument at position <em>r</em>.</p>
<p>All memory buffers with addresses in the array are managed (allocated and released) by the PCRaster Modeling Engine. The types of the buffer are determined per buffer on their respective pcrxml::result and pcrxml::argument elements</p>
<p>Each buffer is of one of the following elementary types:</p>
<ul>
<li>unsigned char*: (UINT1) 8 bit byte for pcrxml::dataType equals boolean or ldd.</li>
<li>int*: (INT4) 32 bit integer for pcrxml::dataType equals nominal or ordinal.</li>
<li>float*: (REAL4) 32 bit float for pcrxml::dataType equals scalar or directional.</li>
</ul>
<p>The type of the buffer is either:</p>
<ul>
<li>the address of single value if pcrxml::spatialType equals NonSpatial</li>
<li>the address of an array of size pcrxml::nrRows * pcrxml::nrCols if pcrxml::spatialType equals Spatial</li>
</ul>
<p>To detect and set Missing Values (e.g. NoData):</p>
<ul>
<li>UINT1: use the value 255</li>
<li>INT4: use the value -2147483647</li>
<li>REAL4: use a NAN value with all bits set to 1.</li>
</ul>
<p>More Missing Value information is in the PCRaster CSF file format specification. </p>

<p>Definition at line <a class="el" href="pcrlinkin_8h_source.html#l00053">53</a> of file <a class="el" href="pcrlinkin_8h_source.html">pcrlinkin.h</a>.</p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="a2ddb53f338999a91fdd4ac37cfd44cbb"></a><!-- doxytag: member="pcrlinkin.h::pcr_LinkInCheck" ref="a2ddb53f338999a91fdd4ac37cfd44cbb" args="(const char *xml)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">pcr_LinkInCheck </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>xml</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>perform typecheck for the pcrxml::callPoint found in <em>xml</em> </p>
<p>This function can check a callPoint on its actual type information. Based on the type information feeded it can generate the possible types of the results and arguments. Note that this function may be called multiple times for the same pcrxml::callPoint, before actual execution (<a class="el" href="pcrlinkin_8h.html#a3779b696141297a5003c28fe71b2240f" title="execute the pcrxml::callPoint found in xml ">pcr_LinkInExecute()</a>).</p>
<p>This function is optional in a linkin library. If not present the modelling engine expects all functions, classes and methods to have "simple types".</p>
<p>Note: pcrxml::context is currently always empty. <a class="el" href="pcrlinkin_8h.html#a3779b696141297a5003c28fe71b2240f" title="execute the pcrxml::callPoint found in xml ">pcr_LinkInExecute()</a> will have pcrxml::context set.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>xml</em>&nbsp;</td><td>xml string with root-element pcrxml::linkInCheckInput </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>xml string with root-element pcrxml::linkInCheckResult Buffer space of pointer should be allocated by the LinkIn library and should be kept. </dd></dl>

</div>
</div>
<a class="anchor" id="a3779b696141297a5003c28fe71b2240f"></a><!-- doxytag: member="pcrlinkin.h::pcr_LinkInExecute" ref="a3779b696141297a5003c28fe71b2240f" args="(const char *xml, LinkInTransferArray linkInTransferArray)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">pcr_LinkInExecute </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>xml</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="pcrlinkin_8h.html#a961bb27c7903d2afe3e4a3889e7def18">LinkInTransferArray</a>&nbsp;</td>
          <td class="paramname"> <em>linkInTransferArray</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>execute the pcrxml::callPoint found in <em>xml</em> </p>
<p>This is the only function that MUST be defined in the library.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>xml</em>&nbsp;</td><td>description of call, pcrxml::linkInExecuteInput root-element </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>linkInTransferArray</em>&nbsp;</td><td>inputs and results </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>0 if no error occured, pointer to C-string with error message if error occured. buffer space of pointer should be allocated by the LinkIn library and should be kept. If the library defines pcr_LinkInRunContext (Simple Mode) then the string contents is expected to be a text-string (no XML) otherwise the buffer should contain an XML string with pcrxml::linkInExecuteResult as root-element. </dd></dl>

</div>
</div>
<a class="anchor" id="a8b54ed90d1ab14f84e4ecf80f8558b2f"></a><!-- doxytag: member="pcrlinkin.h::pcr_LinkInRunContext" ref="a8b54ed90d1ab14f84e4ecf80f8558b2f" args="(int nrRows, int nrCols, double cellSize, double xLowerLeftCorner, double yLowerLeftCorner, int timeStep)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">pcr_LinkInRunContext </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>nrRows</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>nrCols</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&nbsp;</td>
          <td class="paramname"> <em>cellSize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&nbsp;</td>
          <td class="paramname"> <em>xLowerLeftCorner</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&nbsp;</td>
          <td class="paramname"> <em>yLowerLeftCorner</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>timeStep</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>recieve the run context prior to each <a class="el" href="pcrlinkin_8h.html#a3779b696141297a5003c28fe71b2240f" title="execute the pcrxml::callPoint found in xml ">pcr_LinkInExecute()</a> call. </p>
<p>If the library defines this function then prior to each <a class="el" href="pcrlinkin_8h.html#a3779b696141297a5003c28fe71b2240f" title="execute the pcrxml::callPoint found in xml ">pcr_LinkInExecute()</a> call, this function is called. It enables a library programmer to store the information passed by the arguments. <a class="el" href="pcrlinkin_8h.html#a8b54ed90d1ab14f84e4ecf80f8558b2f" title="recieve the run context prior to each pcr_LinkInExecute() call.">pcr_LinkInRunContext()</a> is intended for Simple Mode library development, where the same run context information encoded in the xml argument string of <a class="el" href="pcrlinkin_8h.html#a3779b696141297a5003c28fe71b2240f" title="execute the pcrxml::callPoint found in xml ">pcr_LinkInExecute()</a> can then be ignored because all information needed is passed by this function. </p>

</div>
</div>
</div>
<hr class="footer"/><address style="text-align: right;"><small>Generated on Mon Jul 15 00:06:29 2013 for PCRaster LinkOut API by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.3 </small></address>
</body>
</html>
